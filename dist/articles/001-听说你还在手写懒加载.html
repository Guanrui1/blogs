<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>听说你还在手写懒加载? | MGear | 前端🔗世界</title>
    <meta name="description" content="Lionad 的个人博客, 心流历程以及其它一些好玩的东西">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.239f33b0.css" as="style"><link rel="preload" href="/assets/js/app.cb11b975.js" as="script"><link rel="preload" href="/assets/js/2.06172541.js" as="script"><link rel="preload" href="/assets/js/6.5f8dd3e1.js" as="script"><link rel="prefetch" href="/assets/js/10.12aa52f3.js"><link rel="prefetch" href="/assets/js/11.07453e59.js"><link rel="prefetch" href="/assets/js/12.4da03e45.js"><link rel="prefetch" href="/assets/js/13.2ef82f8b.js"><link rel="prefetch" href="/assets/js/14.9d20b2df.js"><link rel="prefetch" href="/assets/js/3.6f8e4a11.js"><link rel="prefetch" href="/assets/js/4.38cb9f7a.js"><link rel="prefetch" href="/assets/js/5.dc152304.js"><link rel="prefetch" href="/assets/js/7.ec2e1ad1.js"><link rel="prefetch" href="/assets/js/8.cd77a4c2.js"><link rel="prefetch" href="/assets/js/9.d795271a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.239f33b0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MGear | 前端🔗世界</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">社交主页</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">博客内容</a></div><div class="nav-item"><a href="/codes/polyfills/" class="nav-link">代码分享</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">社交主页</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">博客内容</a></div><div class="nav-item"><a href="/codes/polyfills/" class="nav-link">代码分享</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>心流</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>博客</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/articles/005-你本可以少写些if-else.html" class="sidebar-link">📝你本可以少写些if-else</a></li><li><a href="/articles/004-150行代码带你实现小程序中的数据侦听.html" class="sidebar-link">🚀150行代码带你实现小程序中的数据侦听</a></li><li><a href="/articles/003-从一个越写越慢的编辑器中聊聊优化思路.html" class="sidebar-link">从一个越写越慢的编辑器中聊聊优化思路</a></li><li><a href="/articles/002-深入探索Scoped-CSS实现原理.html" class="sidebar-link">[深入探索] VueJS Scoped CSS 实现原理</a></li><li><a href="/articles/001-听说你还在手写懒加载.html" class="active sidebar-link">听说你还在手写懒加载?</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>单曲</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>推荐</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="听说你还在手写懒加载">听说你还在手写懒加载?</h1> <p>过去, 我们对含有大量图片的网站进行优化无外乎要依靠JS逻辑或是相关插件来完成, 比如<code>懒加载</code>技术. 而现在(至少在不久的将来), Chrome 75版本将增加<code>原生懒加载</code>功能.</p> <p><img src="/assets/img/2019-04-23-01-30-25.5352ff8b.png" alt="原生懒加载"></p> <h3 id="直接开始使用">直接开始使用</h3> <p>当然, 你也可以现在就开始体验这一功能, 在浏览器的标签栏输入<code>browser://flags/#enable-lazy-image-loading</code>并进入页面, 找到<code>enable-lazy-image-loading</code>这一项打开它, 重启后即可使用.</p> <p><img src="/assets/img/2019-04-23-00-45-26.33a10db8.png" alt="如何开启"></p> <h3 id="标准之下">标准之下</h3> <p>有关<code>loading</code>的使用, 我相信你想知道更多, 你可以使用以下三个属性来定义浏览器加载行为:</p> <ul><li>lazy: 使用懒加载, 当屏幕滚动到图片附近时</li> <li>eager: 立即加载图片</li> <li>auto: 由浏览器自行决定</li></ul> <p>有关懒加载的讨论, 你可以通过这个<a href="./assets/https://github.com/whatwg/html/pull/3752"><code>issue</code></a>进一步探索.</p> <h3 id="开始使用新代码">开始使用新代码</h3> <p>也许你想把这一特征立即运用到你的项目中, 但是你别忘了至少目前为止他还是实验性的功能, 所以需要做功能检测, 对不支持的浏览器进行兼容:</p> <p><img src="/assets/img/2019-04-23-01-37-31.c6d22f9f.png" alt="功能检测"></p> <p>仅仅这样还不够, 为了不使你的Image标签被不支持<code>loading</code>属性的浏览器立即加载出来, 你还需要把<code>src</code>属性替换为其它属性, 同时还得考虑浏览器不支持JS的情况, 比如像这样做:</p> <p><img src="/assets/img/2019-04-23-01-31-00.2b2e06b6.png" alt="兼容"></p> <h3 id="抛弃非原生懒加载">抛弃非原生懒加载?</h3> <p>抛弃非原生懒加载? 答案在任何情况下都是<code>否</code>.</p> <p>如果未来浏览器都支持懒加载, 并且标准较现在没有改变的话, 它只适用于一些简单的网页浏览场景, 比如像掘金这种文本和图片混排的页面.对于特殊场景下, 比如<a href="https://juejin.im/post/5cbd30e7e51d456e803516ba" target="_blank" rel="noopener noreferrer">这位老哥<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的这篇文章里描绘的问题, 我们还是得需要根据需求, 书写大量原生JS逻辑.除非问题本质得到解决, 否者<strong>任何在体验上的优化, 都是优化一部分场景的性能, 而放弃另一部分场景的性能</strong>(甚至负优化)</p> <h3 id="最后">最后</h3> <p>文中代码图片是使用<a href="https://carbon.now.sh" target="_blank" rel="noopener noreferrer"><code>Carbon</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>合成的, 掘金的代码高亮实在是... 么得办法~~</p> <h3 id="references">References</h3> <blockquote><p><a href="https://addyosmani.com/blog/lazy-loading/" target="_blank" rel="noopener noreferrer">Native image lazy-loading for the web!<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <blockquote><p><a href="https://github.com/whatwg/html/pull/3752" target="_blank" rel="noopener noreferrer">Lazyload images and iframes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <blockquote><p><a href="https://github.com/dwqs/blog/issues/74" target="_blank" rel="noopener noreferrer">图片和视频的懒加载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <blockquote><p><a href="http://medium.yintage.com/?p=44" target="_blank" rel="noopener noreferrer">极致性能 – 图片渐进显示和懒加载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <div id="comment"></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/19/2019, 11:25:43 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.cb11b975.js" defer></script><script src="/assets/js/2.06172541.js" defer></script><script src="/assets/js/6.5f8dd3e1.js" defer></script>
  </body>
</html>
